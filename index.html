<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>Servlet 教程.md</title><style type='text/css'>html {overflow-x: initial !important;}.CodeMirror { height: auto; }
.CodeMirror-scroll { overflow-y: hidden; overflow-x: auto; }
.CodeMirror-lines { padding: 4px 0px; }
.CodeMirror pre { }
.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler { background-color: white; }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background-color: rgb(247, 247, 247); white-space: nowrap; }
.CodeMirror-linenumbers { }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.CodeMirror div.CodeMirror-cursor { border-left: 1px solid black; z-index: 3; }
.CodeMirror div.CodeMirror-secondarycursor { border-left: 1px solid silver; }
.CodeMirror.cm-keymap-fat-cursor div.CodeMirror-cursor { width: auto; border: 0px; background: rgb(119, 238, 119); z-index: 1; }
.CodeMirror div.CodeMirror-cursor.CodeMirror-overwrite { }
.cm-tab { display: inline-block; }
.cm-s-typora-default .cm-header, .cm-s-typora-default .cm-property { color: rgb(217, 79, 138); }
.cm-s-typora-default pre.cm-header1:not(.cm-atom) :not(.cm-overlay) { font-size: 2rem; line-height: 2rem; }
.cm-s-typora-default pre.cm-header2:not(.cm-atom) :not(.cm-overlay) { font-size: 1.4rem; line-height: 1.4rem; }
.cm-s-typora-default .cm-atom, .cm-s-typora-default .cm-number { color: rgb(149, 132, 134); }
.cm-s-typora-default .cm-table-row, .cm-s-typora-default .cm-block-start { font-family: monospace; }
.cm-s-typora-default .cm-comment, .cm-s-typora-default .cm-code { color: rgb(74, 90, 159); font-family: monospace; }
.cm-s-typora-default .cm-tag { color: rgb(169, 68, 66); }
.cm-s-typora-default .cm-string { color: rgb(126, 134, 169); }
.cm-s-typora-default .cm-link { color: rgb(196, 122, 15); text-decoration: underline; }
.cm-s-typora-default .cm-variable-2, .cm-s-typora-default .cm-variable-1 { color: inherit; }
.cm-s-typora-default .cm-overlay { font-size: 1rem; font-family: monospace; }
.CodeMirror.cm-s-typora-default div.CodeMirror-cursor { border-left: 3px solid rgb(228, 98, 154); }
.cm-s-typora-default .CodeMirror-activeline-background { left: -60px; right: -30px; background: rgba(204, 204, 204, 0.2); }
.cm-s-typora-default .CodeMirror-gutters { border-right: none; background-color: inherit; }
.cm-s-typora-default .cm-trailing-space-new-line::after, .cm-startspace::after, .cm-starttab .cm-tab::after { content: "•"; position: absolute; left: 0px; opacity: 0; font-family: LetterGothicStd, monospace; }
.os-windows .cm-startspace::after, .os-windows .cm-starttab .cm-tab::after { left: -0.1em; }
.cm-starttab .cm-tab::after { content: " "; }
.cm-startspace, .cm-tab, .cm-starttab, .cm-trailing-space-a, .cm-trailing-space-b, .cm-trailing-space-new-line { font-family: monospace; position: relative; }
.cm-s-typora-default .cm-trailing-space-new-line::after { content: "↓"; opacity: 0.3; }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: black; }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-property { color: black; }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: blue; }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: bold; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: rgb(255, 0, 0); }
.cm-invalidchar { color: rgb(255, 0, 0); }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { margin-bottom: -30px; margin-right: -30px; padding-bottom: 30px; padding-right: 30px; height: 100%; outline: none; position: relative; box-sizing: content-box; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow-x: hidden; overflow-y: scroll; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow-y: hidden; overflow-x: scroll; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: transparent; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-widget { }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.CodeMirror-selected { background: rgb(217, 217, 217); }
.CodeMirror-focused .CodeMirror-selected { background: rgb(215, 212, 240); }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
.CodeMirror span { }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}
.CodeMirror-lint-markers { width: 16px; }
.CodeMirror-lint-tooltip { background-color: infobackground; border: 1px solid black; border-radius: 4px; color: infotext; font-family: monospace; overflow: hidden; padding: 2px 5px; position: fixed; white-space: pre-wrap; z-index: 10000; max-width: 600px; opacity: 0; transition: opacity 0.4s; font-size: 0.8em; }
.CodeMirror-lint-mark-error, .CodeMirror-lint-mark-warning { background-position: left bottom; background-repeat: repeat-x; }
.CodeMirror-lint-mark-error { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg=="); }
.CodeMirror-lint-marker-error, .CodeMirror-lint-marker-warning { background-position: center center; background-repeat: no-repeat; cursor: pointer; display: inline-block; height: 16px; width: 16px; vertical-align: middle; position: relative; }
.CodeMirror-lint-message-error, .CodeMirror-lint-message-warning { padding-left: 18px; background-position: left top; background-repeat: no-repeat; }
.CodeMirror-lint-marker-error, .CodeMirror-lint-message-error { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII="); }
.CodeMirror-lint-marker-warning, .CodeMirror-lint-message-warning { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII="); }
.CodeMirror-lint-marker-multiple { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC"); background-repeat: no-repeat; background-position: right bottom; width: 100%; height: 100%; }


html { font-size: 14px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { background: rgb(181, 214, 252); text-shadow: none; }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; padding-bottom: 70px; white-space: pre-wrap; overflow-x: visible; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
.typora-export #write { margin: 0px auto; }
#write > p:first-child, #write > ul:first-child, #write > ol:first-child, #write > pre:first-child, #write > blockquote:first-child, #write > div:first-child, #write > table:first-child { margin-top: 30px; }
#write li > table:first-child { margin-top: -20px; }
img { max-width: 100%; vertical-align: middle; }
input, button, select, textarea { color: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
::before, ::after, * { box-sizing: border-box; }
#write p, #write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write div, #write pre { width: inherit; }
#write p, #write h1, #write h2, #write h3, #write h4, #write h5, #write h6 { position: relative; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
p { -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; }
.mathjax-block { margin-top: 0px; margin-bottom: 0px; -webkit-margin-before: 0rem; -webkit-margin-after: 0rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: bold; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.701961); color: rgb(85, 85, 85); border-radius: 4px; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; margin: 4px 0px 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 80px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
pre { white-space: pre-wrap; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
.md-fences .CodeMirror.CodeMirror-wrap { top: -1.6em; margin-bottom: -1.6em; }
.md-fences.mock-cm { white-space: pre-wrap; }
.show-fences-line-number .md-fences { padding-left: 0px; }
.show-fences-line-number .md-fences.mock-cm { padding-left: 40px; }
.footnotes { opacity: 0.8; font-size: 0.9rem; padding-top: 1em; padding-bottom: 1em; }
.footnotes + .footnotes { margin-top: -1em; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: transparent; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: normal; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li p, li .mathjax-block { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; }
@media print {
  html, body { height: 100%; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  h1, h2, h3, h4, h5, h6 { break-after: avoid-page; orphans: 2; }
  p { orphans: 4; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 1cm; padding-right: 1cm; }
  .typora-export #write::after { height: 0px; }
  @page { margin: 20mm 0mm; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 2.86rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p .md-image:only-child { display: inline-block; width: 100%; text-align: center; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.mathjax-block { white-space: pre; overflow: hidden; width: 100%; }
p + .mathjax-block { margin-top: -1.143rem; }
.mathjax-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: none; box-shadow: none; }
.task-list { list-style-type: none; }
.task-list-item { position: relative; padding-left: 1em; }
.task-list-item input { position: absolute; top: 0px; left: 0px; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc::after, .md-toc-content::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); text-decoration: none; }
.md-toc-inner:hover { }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: bold; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
.md-tag { opacity: 0.5; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: monospace; }
code { text-align: left; }
h1 .md-tag, h2 .md-tag, h3 .md-tag, h4 .md-tag, h5 .md-tag, h6 .md-tag { font-weight: initial; opacity: 0.35; }
a.md-print-anchor { border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: none !important; background: transparent !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.mathjax-block .MathJax_SVG_Display { text-align: center; margin: 1em 0em; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: monospace; }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: normal; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none; }


html { font-size: 19px; }
html, body { margin: auto; background: rgb(254, 254, 254); }
body { font-family: Vollkorn, Palatino, Times; color: rgb(51, 51, 51); line-height: 1.4; text-align: justify; }
#write { max-width: 960px; margin: 0px auto 2em; line-height: 1.53; }
#write > h2:first-child, #write > h3:first-child, #write > h4:first-child, #write > p:first-child { margin-top: 1.2em; }
#write > h1:first-child, h1 { margin-top: 1.6em; font-weight: normal; }
h1 { font-size: 3em; }
h2 { margin-top: 2em; font-weight: normal; }
h3 { font-weight: normal; font-style: italic; margin-top: 3em; }
h1, h2, h3 { text-align: center; }
h2::after { border-bottom: 1px solid rgb(47, 47, 47); content: ""; width: 100px; display: block; margin: 0px auto; height: 1px; }
h1 + h2, h2 + h3 { margin-top: 0.83em; }
p, .mathjax-block { margin-top: 0px; }
ul { list-style: square; padding-left: 1.2em; }
ol { padding-left: 1.2em; }
blockquote { margin-left: 1em; padding-left: 1em; border-left: 1px solid rgb(221, 221, 221); }
code, pre { font-family: Consolas, Menlo, Monaco, monospace, serif; font-size: 0.9em; background: white; }
.md-fences { margin-left: 1em; padding-left: 1em; border: 1px solid rgb(221, 221, 221); padding-bottom: 8px; padding-top: 6px; margin-bottom: 1.5em; }
a { color: rgb(36, 132, 193); text-decoration: none; }
a:hover { text-decoration: underline; }
a img { border: none; }
h1 a, h1 a:hover { color: rgb(51, 51, 51); text-decoration: none; }
hr { color: rgb(221, 221, 221); height: 1px; margin: 2em 0px; border-top: 1px solid rgb(221, 221, 221); border-bottom: none; border-left: 0px; border-right: 0px; }
.md-table-edit { background: rgb(237, 237, 237); padding-top: 4px; }
table { margin-bottom: 1.33333rem; }
table th, table td { padding: 8px; line-height: 1.33333rem; vertical-align: top; border-top: 1px solid rgb(221, 221, 221); }
table th { font-weight: bold; }
table thead th { vertical-align: bottom; }
table caption + thead tr:first-child th, table caption + thead tr:first-child td, table colgroup + thead tr:first-child th, table colgroup + thead tr:first-child td, table thead:first-child tr:first-child th, table thead:first-child tr:first-child td { border-top: 0px; }
table tbody + tbody { border-top: 2px solid rgb(221, 221, 221); }
.task-list { padding: 0px; }
.task-list-item { padding-left: 1.6rem; }
.task-list-item input::before { content: "√"; display: inline-block; width: 1.33333rem; height: 1.6rem; vertical-align: middle; text-align: center; color: rgb(221, 221, 221); background-color: rgb(254, 254, 254); }
.task-list-item input:checked::before, .task-list-item input[checked]::before { color: inherit; }
.md-tag { color: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; }
#write pre.md-meta-block { min-height: 35px; padding: 0.5em 1em; }
#write pre.md-meta-block { white-space: pre; background: rgb(248, 248, 248); border-width: 0px 30px; border-top-style: initial; border-bottom-style: initial; border-top-color: initial; border-bottom-color: initial; border-image: initial; color: rgb(153, 153, 153); width: 100vw; max-width: calc(100% + 60px); margin-left: -30px; border-left-style: solid; border-left-color: rgb(248, 248, 248); border-right-style: solid; border-right-color: rgb(248, 248, 248); margin-bottom: 2em; margin-top: -1.33333rem; padding-top: 26px; padding-bottom: 10px; line-height: 1.8em; font-size: 0.76em; padding-left: 0px; }
.md-img-error.md-image > .md-meta { vertical-align: bottom; }
#write > h5.md-focus::before { top: 2px; }
.md-toc { margin-top: 40px; }
.md-toc-content { padding-bottom: 20px; }
.outline-expander::before { color: inherit; font-size: 14px; top: auto; content: ""; font-family: FontAwesome; }
.outline-expander:hover::before, .outline-item-open > .outline-item > .outline-expander::before { content: ""; }
#typora-source { font-family: Courier, monospace; color: rgb(106, 106, 106); }
.cm-s-typora-default .cm-header, .cm-s-typora-default .cm-property, .CodeMirror.cm-s-typora-default div.CodeMirror-cursor { color: rgb(66, 139, 202); }
.cm-s-typora-default .cm-atom, .cm-s-typora-default .cm-number { color: rgb(119, 119, 119); }






</style>
</head>
<body class='typora-export' >
<div  id='write'  class = 'is-node'><h1><a name='header-n0' class='md-header-anchor '></a>Servlet 教程</h1><div class='md-toc' mdtype='toc'><p class="md-toc-content"><span class="md-toc-item md-toc-h1" data-ref="n0"><a class="md-toc-inner" href="#header-n0">Servlet 教程</a></span><span class="md-toc-item md-toc-h2" data-ref="n3"><a class="md-toc-inner" href="#header-n3">简介</a></span><span class="md-toc-item md-toc-h3" data-ref="n37"><a class="md-toc-inner" href="#header-n37">Servlet 的任务</a></span><span class="md-toc-item md-toc-h2" data-ref="n55"><a class="md-toc-inner" href="#header-n55">Servlet 的生命周期</a></span><span class="md-toc-item md-toc-h3" data-ref="n72"><a class="md-toc-inner" href="#header-n72"><code>init()</code> 方法</a></span><span class="md-toc-item md-toc-h3" data-ref="n80"><a class="md-toc-inner" href="#header-n80"><code>service()</code> 方法</a></span><span class="md-toc-item md-toc-h3" data-ref="n86"><a class="md-toc-inner" href="#header-n86"><code>doGet()</code> 方法</a></span><span class="md-toc-item md-toc-h3" data-ref="n90"><a class="md-toc-inner" href="#header-n90"><code>doPost()</code> 方法</a></span><span class="md-toc-item md-toc-h3" data-ref="n94"><a class="md-toc-inner" href="#header-n94"><code>destroy()</code> 方法</a></span><span class="md-toc-item md-toc-h3" data-ref="n101"><a class="md-toc-inner" href="#header-n101">架构图</a></span><span class="md-toc-item md-toc-h2" data-ref="n115"><a class="md-toc-inner" href="#header-n115">Servlet 实例</a></span><span class="md-toc-item md-toc-h3" data-ref="n118"><a class="md-toc-inner" href="#header-n118">Servlet 部署</a></span><span class="md-toc-item md-toc-h2" data-ref="n126"><a class="md-toc-inner" href="#header-n126">表单数据</a></span><span class="md-toc-item md-toc-h3" data-ref="n129"><a class="md-toc-inner" href="#header-n129">GET 方法</a></span><span class="md-toc-item md-toc-h3" data-ref="n149"><a class="md-toc-inner" href="#header-n149">POST 方法</a></span><span class="md-toc-item md-toc-h3" data-ref="n152"><a class="md-toc-inner" href="#header-n152">使用 Servlet 读取表单数据</a></span><span class="md-toc-item md-toc-h3" data-ref="n165"><a class="md-toc-inner" href="#header-n165">使用 URL 的 GET 方法实例</a></span><span class="md-toc-item md-toc-h3" data-ref="n175"><a class="md-toc-inner" href="#header-n175">使用表单的 GET 方法实例</a></span><span class="md-toc-item md-toc-h3" data-ref="n179"><a class="md-toc-inner" href="#header-n179">使用表单的 POST 方法实例</a></span><span class="md-toc-item md-toc-h3" data-ref="n182"><a class="md-toc-inner" href="#header-n182">将复选框数据传递到 Servlet</a></span><span class="md-toc-item md-toc-h3" data-ref="n192"><a class="md-toc-inner" href="#header-n192">读取所有的表单参数</a></span><span class="md-toc-item md-toc-h2" data-ref="n200"><a class="md-toc-inner" href="#header-n200">客户端 HTTP 请求</a></span><span class="md-toc-item md-toc-h3" data-ref="n203"><a class="md-toc-inner" href="#header-n203">一些重要的头信息</a></span><span class="md-toc-item md-toc-h3" data-ref="n247"><a class="md-toc-inner" href="#header-n247">读取 HTTP 头的方法</a></span><span class="md-toc-item md-toc-h3" data-ref="n379"><a class="md-toc-inner" href="#header-n379">HTTP Header 请求实例</a></span><span class="md-toc-item md-toc-h2" data-ref="n388"><a class="md-toc-inner" href="#header-n388">服务器 HTTP 响应</a></span><span class="md-toc-item md-toc-h3" data-ref="n389"><a class="md-toc-inner" href="#header-n389">HTTP 响应消息格式</a></span><span class="md-toc-item md-toc-h3" data-ref="n395"><a class="md-toc-inner" href="#header-n395">一些从 Web 服务端返回的有用的 HTTP 1.1 响应报头：</a></span><span class="md-toc-item md-toc-h3" data-ref="n442"><a class="md-toc-inner" href="#header-n442">设置 HTTP 响应报头的方法</a></span><span class="md-toc-item md-toc-h3" data-ref="n540"><a class="md-toc-inner" href="#header-n540">HTTP Header 响应实例</a></span><span class="md-toc-item md-toc-h2" data-ref="n546"><a class="md-toc-inner" href="#header-n546">HTTP 状态码</a></span><span class="md-toc-item md-toc-h3" data-ref="n549"><a class="md-toc-inner" href="#header-n549">一些 HTTP 状态码及相关消息列表</a></span><span class="md-toc-item md-toc-h3" data-ref="n736"><a class="md-toc-inner" href="#header-n736">设置 HTTP 状态码的方法</a></span><span class="md-toc-item md-toc-h3" data-ref="n756"><a class="md-toc-inner" href="#header-n756">HTTP 状态码实例</a></span><span class="md-toc-item md-toc-h2" data-ref="n760"><a class="md-toc-inner" href="#header-n760">编写 Filter</a></span><span class="md-toc-item md-toc-h3" data-ref="n808"><a class="md-toc-inner" href="#header-n808">Servlet 过滤器方法</a></span><span class="md-toc-item md-toc-h3" data-ref="n828"><a class="md-toc-inner" href="#header-n828">FilterConfig 使用</a></span><span class="md-toc-item md-toc-h3" data-ref="n835"><a class="md-toc-inner" href="#header-n835">Servlet 过滤器实例</a></span><span class="md-toc-item md-toc-h3" data-ref="n837"><a class="md-toc-inner" href="#header-n837"><code>Web.xml</code> 的 Servlet 过滤器映射 （Servlet Filter Mapping）</a></span><span class="md-toc-item md-toc-h3" data-ref="n843"><a class="md-toc-inner" href="#header-n843">使用多个过滤器</a></span><span class="md-toc-item md-toc-h4" data-ref="n847"><a class="md-toc-inner" href="#header-n847">过滤器的应用顺序</a></span><span class="md-toc-item md-toc-h4" data-ref="n850"><a class="md-toc-inner" href="#header-n850"><code>web.xml</code> 配置各节点说明</a></span><span class="md-toc-item md-toc-h2" data-ref="n907"><a class="md-toc-inner" href="#header-n907">异常处理</a></span></p></div><h2><a name='header-n3' class='md-header-anchor '></a>简介</h2><p>Java Servlet 是运行是在 Web 服务器或应用服务器上的<strong>程序</strong>，是作为来自 Web 浏览器或其他 HTTP 客户端的请求和 HTTP 服务器上的数据库或应用程序之间的<strong>中间层</strong>。</p><p>使用 Servlet 可以</p><ol start='' ><li>收集来自网页表单的用户输入，</li><li>呈现来自数据库或者其他源的记录，</li><li>创建动态网站。</li></ol><p>Servlet 比较 CGI  的优点：</p><ul><li>性能更好；</li><li>Servlet 在 Web 服务器的地址空间内执行。不需要再创建一个单独的进程来处理每个客户端的请求；</li><li>独立于平台，因为是基于 Java 的；</li><li>Servlet 是可信的，因为服务器上的 Java 安全管理器执行了一系列的限制以保护服务器上的资源；</li><li>Java 的类库的全部功能对 Servlet 来说都是可用的。它通过 sockets 和 RMI 机制与 applets、数据库或其他软件进行交互。</li></ul><hr /><h3><a name='header-n37' class='md-header-anchor '></a>Servlet 的任务</h3><ul><li><strong>读取</strong>客户端发送的显式数据，包括网页上的 HTML 表单等。</li><li>读取客户端发送的隐式 HTTP 请求数据，包括 cookies、媒体类型和浏览器能理解的压缩格式等。</li><li><strong>处理</strong>数据并生成结果，可能需要访问数据库，执行调用。</li><li><strong>发送</strong>显式数据到客户端，包括文本，二进制文件等。</li><li>发送隐式 HTTP 响应到客户端。</li></ul><hr /><h2><a name='header-n55' class='md-header-anchor '></a>Servlet 的生命周期</h2><p>Servlet 从创建到毁灭遵循一下过程：</p><ul><li>Servlet 通过调用 <code>init()</code> 方法来进行初始化，</li><li>调用 <code>service()</code> 方法来处理<strong>客户端</strong>的请求，</li><li>调用 <code>destroy()</code> 方法来终止，</li><li>最后由 JVM 的垃圾回收器进行垃圾回收</li></ul><hr /><h3><a name='header-n72' class='md-header-anchor '></a><code>init()</code> 方法</h3><p>只调用一次，在第一次创建 Servlet 时被调用，此后不再调用。</p><p>Servlet 在用户第一次调用对应于该 Servlet 的 URL 时被创建，但是也可以制定 Servlet 在服务器第一次启动时夹在。</p><p>当用户调用一个 Servlet 时，就会创建一个 Servlet 实例。每一个用户<strong>请求</strong>都会产生一个新的<strong>线程</strong>，适当的时候移交给  <strong><code>doGet()</code></strong> 或  <strong><code>doPost()</code></strong> 方法。<code>init()</code> 方法简单地<strong>创建或加载</strong>一些数据，这些数据将被用于 Servlet 的整个生命周期。</p><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure">AخA</div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//init() 的定义方法</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-def">init</span>() <span class="cm-keyword">throws</span> <span class="cm-variable">ServletException</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;">  ...<span class="cm-tab">   </span><span class="cm-comment">//初始化代码</span></span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 106px;"></div></div></div></pre><h3><a name='header-n80' class='md-header-anchor '></a><code>service()</code> 方法</h3><p>执行实际人物的主要方法。Servlet 容器通过调用 <code>service()</code> 方法来检查 HTTP 请求类型（GET、POST、PUT、DELETE 等），并在适当时候调用相关算法。</p><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//service() 方法的特征</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-def">service</span>(<span class="cm-variable">ServletRequest</span> <span class="cm-variable">request</span>, <span class="cm-variable">ServletResponse</span> <span class="cm-variable">response</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">throws</span> <span class="cm-variable">ServlertException</span>, <span class="cm-variable">IOException</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;">  }</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre><p><code>service()</code> 方法由容器调用，并在适当时候调用相关方法。所以<strong>不需要做任何动作</strong>。只需要根据不同的请求类型，来重写 <strong><code>doGet()</code></strong> 或 <strong><code>doPost()</code></strong> 等方法即可。</p><h3><a name='header-n86' class='md-header-anchor '></a><code>doGet()</code> 方法</h3><p>GET 请求来自于一个 URL 的<strong>正常请求</strong>，或者来自于一个<strong>未指定 METHOD</strong> 的 HTML 表单，由 <code>doGet()</code> 方法处理。</p><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//doGet() 方法的特征</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-def">doGet</span>(<span class="cm-variable">HttpServletRequest</span> <span class="cm-variable">request</span>, <span class="cm-variable">HttpServletResponse</span> <span class="cm-variable">response</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">throws</span> <span class="cm-variable">ServlettException</span>, <span class="cm-variable">IOException</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  ...<span class="cm-tab"> </span><span class="cm-comment">// Servlet 代码，doGet() 方法的实现，一般 cover 父类方法</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  }</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 132px;"></div></div></div></pre><h3><a name='header-n90' class='md-header-anchor '></a><code>doPost()</code> 方法</h3><p>POST 请求来自于一个<strong>特别指定 METHOD </strong>为 POST 的 HTML 表单，由 <code>doPost()</code> 方法处理。</p><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//doPost() 方法的特征</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-def">doPost</span>(<span class="cm-variable">HttpServletRequest</span> <span class="cm-variable">request</span>, <span class="cm-variable">HttpServletResponse</span> <span class="cm-variable">response</span>) </span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">throws</span> <span class="cm-variable">ServletException</span>, <span class="cm-variable">IOException</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  ...<span class="cm-tab"> </span><span class="cm-comment">// Servlet 代码，doPost() 方法的实现，一般 cover 父类的方法</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  }</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 132px;"></div></div></div></pre><h3><a name='header-n94' class='md-header-anchor '></a><code>destroy()</code> 方法</h3><p><code>destroy()</code> 方法只会被调用一次，在 Servlet 生命周期结束的时候被调用。<code>destroy()</code> 方法让 Servlet 关闭数据库链接，停止后台线程，把 Cookie 列表或点击计数器写入磁盘，并执行其他类似的清理活动。</p><p>在调用 <code>destroy()</code> 方法后，servlet 对象被标记为垃圾回收。</p><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//destroy() 方法的特征</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-def">destroy</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;">  ...<span class="cm-tab">   </span><span class="cm-comment">//终止化代码</span></span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 106px;"></div></div></div></pre><hr /><h3><a name='header-n101' class='md-header-anchor '></a>架构图</h3><p><img src='/home/d/Desktop/Servlet-LifeCycle.jpg' alt='Servlet-LifeCycle' /></p><ul><li>第一个到达服务器的 HTTP 请求被委派到 Servlet 容器，</li><li>Servlet 容器在调用 <code>service()</code> 方法之前加载 Servlet，</li><li>然后 Servlet 容器处理由多个线程产生的多个请求，每个线程执行单一的 Servlet 实例的 <code>service()</code> 方法。</li></ul><hr /><h2><a name='header-n115' class='md-header-anchor '></a>Servlet 实例</h2><p>Servlet 是服务 HTTP 请求并实现 <strong><code>javax.servlet.Servlet</code></strong> 的 Java <strong>类</strong>。Web 应用程序开发人员通常编写 Servlet 来扩展 <code>javax.servlet.http.HttpServlet</code>，并<strong>实现 Servlet 接口</strong>的<strong>抽象类</strong>，专门用来处理 HTTP 请求。</p><h3><a name='header-n118' class='md-header-anchor '></a>Servlet 部署</h3><p>默认情况下，Servlet 应用程序位于路径 <code>&lt;Tomcat-installation-directory&gt;/webapps/ROOT</code> 目录下，且类文件放在 <code>&lt;Tomcat-installation-directory&gt;/webapps/ROOT/WEB-INF/classes</code> 中。</p><p>如果有完全合计的类名称 <code>com.myorg.MyServlet</code>，那么这个 Servlet 类必须位于 <code>WEB-INF/classes/com/myorg/MyServlet.class</code>.</p><p>假设已经存在 <code>HelloWrold.class</code> 位于 <code>&lt;Tomcat-installation-directory&gt;/webapps/ROOT/WEB-INF/classes</code> 中，在位于 <code>&lt;Tomcat-installation-directory&gt;/webapps/ROOT/WEB-INF/</code> 的 <code>web.xml</code> 创建以下条目：</p><pre class="md-fences md-end-block" lang="xml"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">web-app</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;">  ...<span class="cm-tab">   </span><span class="cm-comment">&lt;!-- 可能具有的其它可用的条目 --&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  </span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span>HelloWorld<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-class</span><span class="cm-tag cm-bracket">&gt;</span>HelloWorld<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-class</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  </span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-mapping</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span>HelloWorld<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">url-pattern</span><span class="cm-tag cm-bracket">&gt;</span>/HelloWorld<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">url-pattern</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-mapping</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">web-app</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 340px;"></div></div></div></pre><h2><a name='header-n126' class='md-header-anchor '></a>表单数据</h2><p>浏览器可以使用 GET 方法或 POST 方法从浏览器将信息传递至 Web 服务器。</p><h3><a name='header-n129' class='md-header-anchor '></a>GET 方法</h3><p>向页面请求发送已编码的用户信息。页面与已编码的用户信息间用 <code>?</code> 分割。如</p><pre class='md-fences mock-cm' style='display:block;position:relative'>http://www.test.com/hello?key1=value1&amp;key2=value2</pre><ul><li>GET 方法是默认的从浏览器向 Web 服务器传递信息的方法；</li><li>会产生一个很长的字符串，出现在浏览器的地址中；</li><li>如果需要传递密码或其它<strong>敏感信息</strong>，不应使用 GET 方法，应选择 <strong>POST</strong> 方法；</li><li>GET 方法有大小限制：请求字符串中最多只能有 1024 个字符。</li><li>这些信息使用 <code>QUERY_STRING</code> 头传递，通过 <code>QUERY_STRING</code> 环境变量访问，Servlet 使用 <code>doGet()</code> 方法来处理这种类型请求。</li></ul><h3><a name='header-n149' class='md-header-anchor '></a>POST 方法</h3><p>POST 方法打包信息方式与 GET 方法基本相同，但不把信息作为 URL 中 <code>?</code> 字符后的文本串进行发送，而是将其作为单独消息。消息以标准输出的形式传到后台程序，可以解析和使用这些标准输出。Servlet 使用 <code>doPost()</code> 方法来处理这种类型的请求。</p><h3><a name='header-n152' class='md-header-anchor '></a>使用 Servlet 读取表单数据</h3><p>Servlet 处理表单数据，这些数据会根据不同的情况使用不同的方法自动解析：</p><ul><li><code>getParameter()</code>：可以调用 <code>request.getParameter()</code> 方法来获取表单参数的值；</li><li><code>getParameterValues()</code>：如果参数出现一次以上，调用该方法可以返回多个值，例如复选框；</li><li><code>getParameterNames()</code>：如果希望得到当前请求中的所有参数的完整列表，则调用该方法，返回 <code>Enumeration</code> 类型。</li></ul><h3><a name='header-n165' class='md-header-anchor '></a>使用 URL 的 GET 方法实例</h3><p>通过 URL 使用 GET 方法向HelloForm 程序传递两个值：</p><pre class='md-fences mock-cm' style='display:block;position:relative'>http://localhost:8080/TomcatTest/HelloForm?name=value1&amp;key=value2</pre><p>下面是处理该信息的 <code>HelloForm.java</code> 的 Servlet 程序：</p><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">package</span> <span class="cm-def">Servlet</span>;</span></pre></div><pre class=""><span style="padding-right: 0.1px;"> </span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">java</span>.<span class="cm-variable">io</span>.<span class="cm-variable">IOException</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">java</span>.<span class="cm-variable">io</span>.<span class="cm-variable">PrintWriter</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">ServletException</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">annotation</span>.<span class="cm-variable">WebServlet</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">http</span>.<span class="cm-variable">HttpServlet</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">http</span>.<span class="cm-variable">HttpServletRequest</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">http</span>.<span class="cm-variable">HttpServletResponse</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">@WebServlet</span>(<span class="cm-string">"/HelloForm"</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">HelloForm</span> <span class="cm-keyword">extends</span> <span class="cm-variable">HttpServlet</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">private</span> <span class="cm-keyword">static</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">long</span> <span class="cm-variable">serialVersionUID</span> <span class="cm-operator">=</span> <span class="cm-number">1L</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">  </span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">/**</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">* @see HttpServlet#httpServlet()</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">public</span> <span class="cm-variable">HelloForm</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">super</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//TODO AUto-generated constructor stub</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  }</span></pre><pre class=""><span style="padding-right: 0.1px;">  </span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">/**</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">* @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">protected</span> <span class="cm-variable-3">void</span> <span class="cm-variable">doGet</span>(<span class="cm-variable">HttpServletRequest</span> <span class="cm-variable">request</span>, <span class="cm-variable">HttpServletResponse</span> <span class="cm-variable">response</span>) </span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">throws</span> <span class="cm-variable">ServletException</span>, <span class="cm-variable">IOException</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-comment">//设置响应内容类型</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-variable">response</span>.<span class="cm-variable">setContentType</span>(<span class="cm-string">"text/html;charset=UTF-8"</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  </span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  ...</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-variable">request</span>.<span class="cm-variable">getParameter</span>(<span class="cm-string">"name"</span>)<span class="cm-tab">  </span><span class="cm-comment">//获得 name 参数的值 value1</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  ...</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-variable">request</span>.<span class="cm-variable">getParameter</span>(<span class="cm-string">"key"</span>)<span class="cm-tab">   </span><span class="cm-comment">//获得 key 参数的值 value2</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  ...</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-variable">response</span>.<span class="cm-variable">getWriter</span>().<span class="cm-variable">println</span>(...)<span class="cm-tab"> </span><span class="cm-comment">//响应输出</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  ...</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;">  </span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">//处理 POST 请求的方法</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">doPost</span>(<span class="cm-variable">HttpServletRequest</span> <span class="cm-variable">request</span>, <span class="cm-variable">HttpServletResponse</span> <span class="cm-variable">response</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">throws</span> <span class="cm-variable">ServletException</span>, <span class="cm-variable">IOException</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-variable">doGet</span>(<span class="cm-variable">request</span>, <span class="cm-variable">response</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1202px;"></div></div></div></pre><p>并需要在 <code>web.xml</code> 中配置以下条目：</p><pre class="md-fences md-end-block" lang="xml"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">&lt;?xml</span> <span class="cm-meta">version="1.0" encoding="UTF-8"?&gt;</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">web-app</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  ...<span class="cm-tab">   </span><span class="cm-comment">&lt;!-- 某些已经可能作用的条目 --&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tab">  </span><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span>HelloForm<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-class</span><span class="cm-tag cm-bracket">&gt;</span>Servlet.HelloForm<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-class</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-mapping</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tab">  </span><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span>HelloForm<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">url-pattern</span><span class="cm-tag cm-bracket">&gt;</span>/TomcatTest/HelloForm<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">url-pattern</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-mapping</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">web-app</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 318px;"></div></div></div></pre><h3><a name='header-n175' class='md-header-anchor '></a>使用表单的 GET 方法实例</h3><p>下面是一个简单的实例，使用 HTML 表单和提交按钮传递两个值，并使用 HelloForm 的 Servlet 来处理。建立 HTML 文件 <code>hello.html</code> 到 <code>WEB-INF</code> 中，</p><pre class="md-fences md-end-block" lang="html"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">&lt;!DOCTYPE html&gt;</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">html</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">head</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">meta</span> <span class="cm-attribute">charset</span>=<span class="cm-string">"UTF-8"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">title</span><span class="cm-tag cm-bracket">&gt;</span>一个测试<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">title</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">head</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">body</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">form</span> <span class="cm-attribute">action</span>=<span class="cm-string">"HelloForm"</span> <span class="cm-attribute">method</span>=<span class="cm-string">"GET"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-comment">&lt;!-- type 是按钮类型，name 是传入参数的名字 --&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  文本框1：<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"text"</span> <span class="cm-attribute">name</span>=<span class="cm-string">"name"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">br</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  文本框2：<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"text"</span> <span class="cm-attribute">name</span>=<span class="cm-string">"key"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"submit"</span> <span class="cm-attribute">value</span>=<span class="cm-string">"提交按钮名字"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">form</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">body</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">html</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 416px;"></div></div></div></pre><h3><a name='header-n179' class='md-header-anchor '></a>使用表单的 POST 方法实例</h3><p>在 Servlet 中实现 <code>doPost()</code> 方法，相应地在 HTML 文件中改写 <code>&lt;form action=&quot;HelloForm&quot; method=&quot;POST&quot;&gt;</code> 即可。</p><h3><a name='header-n182' class='md-header-anchor '></a>将复选框数据传递到 Servlet</h3><p>下面是一个 HTML 代码实例 <code>checkbox.html</code> 一个带有两个复选框的表单。</p><pre class="md-fences md-end-block" lang="html"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">&lt;!DOCTYPE html&gt;</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">html</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">head</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">meta</span> <span class="cm-attribute">charset</span>=<span class="cm-string">"utf-8"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">title</span><span class="cm-tag cm-bracket">&gt;</span>这是一个复选框的例子<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">title</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">head</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">body</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">form</span> <span class="cm-attribute">action</span>=<span class="cm-string">"CheckBox"</span> <span class="cm-attribute">method</span>=<span class="cm-string">"POST"</span> <span class="cm-attribute">target</span>=<span class="cm-string">"_blank"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"checkbox"</span> <span class="cm-attribute">name</span>=<span class="cm-string">"first"</span> <span class="cm-tag cm-bracket">/&gt;</span> 文本文档1 </span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"checkbox"</span> <span class="cm-attribute">name</span>=<span class="cm-string">"second"</span> <span class="cm-tag cm-bracket">/&gt;</span> 文本文档2</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-comment">&lt;!-- 如果这里 checked="checked"，那么会事先勾上 --&gt;</span> </span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"checkbox"</span> <span class="cm-attribute">name</span>=<span class="cm-string">"third"</span> <span class="cm-attribute">checked</span>=<span class="cm-string">"checked"</span> <span class="cm-tag cm-bracket">/&gt;</span> 文本文档3</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"submit"</span> <span class="cm-attribute">value</span>=<span class="cm-string">"按钮的名字"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">form</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">body</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">html</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 416px;"></div></div></div></pre><p>相应的，编写 <code>CheckBox.java</code> 的 Servlet 程序，来处理输入，</p><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;">...<span class="cm-tab"> </span><span class="cm-comment">//和上面相同，不同的是</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">public</span>  <span class="cm-variable-3">void</span> <span class="cm-def">doGet</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  ...</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-variable">request</span>.<span class="cm-variable">getParameter</span>(<span class="cm-string">"first"</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  ...</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-variable">request</span>.<span class="cm-variable">getParameter</span>(<span class="cm-string">"second"</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  ...</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-variable">request</span>.<span class="cm-variable">getParameter</span>(<span class="cm-string">"third"</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  ...</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 266px;"></div></div></div></pre><p>设置对应的 <code>web.xml</code></p><pre class="md-fences md-end-block" lang="xml"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">&lt;?xml</span> <span class="cm-meta">version="1.0" encoding="UTF-8"?&gt;</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">web-app</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span>CheckBox<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-class</span><span class="cm-tag cm-bracket">&gt;</span>Servlet.CheckBox<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-class</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-mapping</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span>CheckBox<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">url-pattern</span><span class="cm-tag cm-bracket">&gt;</span>/TomcatTest/CheckBox<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">url-pattern</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-mapping</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">web-app</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 286px;"></div></div></div></pre><h3><a name='header-n192' class='md-header-anchor '></a>读取所有的表单参数</h3><p>下面是使用 <code>HttpServletRequest</code> 的 <strong><code>getParameterNames()</code></strong> 方法读取所有可用的表单参数的通用例子，该方法返回一个<strong>枚举类型</strong>，其中包含未制定顺序的参数名。</p><p>一旦我们有一个枚举，即可以使用标准方式循环枚举，使用 <code>hasMoreElements()</code> 来判断是否停止，使用 <code>nextElement()</code> 来获取每个参数名称。</p><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">java</span>.<span class="cm-variable">io</span>.<span class="cm-variable">IOException</span>;</span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">java</span>.<span class="cm-variable">io</span>.<span class="cm-variable">PrintWriter</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">java</span>.<span class="cm-variable">util</span>.<span class="cm-variable">Enumeration</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">ServletException</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">annotation</span>.<span class="cm-variable">WebServlet</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">http</span>.<span class="cm-variable">HttpServlet</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">http</span>.<span class="cm-variable">HttpServletRequest</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">http</span>.<span class="cm-variable">HttpServletResponse</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">/**</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">* Servlet implementation class ReadParams</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">@WebServlet</span>(<span class="cm-string">"/ReadParams"</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">ReadParams</span> <span class="cm-keyword">extends</span> <span class="cm-variable">HttpServlet</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">private</span> <span class="cm-keyword">static</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">long</span> <span class="cm-variable">serialVersionUID</span> <span class="cm-operator">=</span> <span class="cm-number">1L</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">  </span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">/**</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">* @see HttpServlet#HttpServlet()</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">public</span> <span class="cm-variable">ReadParams</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">super</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//TODO Auto-generated constructor stub</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  }</span></pre><pre class=""><span style="padding-right: 0.1px;">  </span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">/**</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">* @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">doGet</span>(<span class="cm-variable">HttpServletRequest</span> <span class="cm-variable">request</span>, <span class="cm-variable">HttpServletResponse</span> <span class="cm-variable">response</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">throws</span> <span class="cm-variable">ServletException</span>, <span class="cm-variable">IOException</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  ...<span class="cm-tab">   </span><span class="cm-comment">//和别的一样</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-variable">Enmeration</span> <span class="cm-variable">paramNames</span> <span class="cm-operator">=</span> <span class="cm-variable">request</span>.<span class="cm-variable">getParameterNames</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  </span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-keyword">while</span>(<span class="cm-variable">paramNames</span>.<span class="cm-variable">hasMoreElements</span>()) {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable-3">String</span> <span class="cm-variable">paramName</span> <span class="cm-operator">=</span> (<span class="cm-variable-3">String</span>) <span class="cm-variable">paramNames</span>.<span class="cm-variable">nextElement</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  ...</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable">request</span>.<span class="cm-variable">getParameterValues</span>(<span class="cm-variable">paramName</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  ...</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  ...</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;">  </span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">/**</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">* @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">*/</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">protected</span> <span class="cm-variable-3">void</span> <span class="cm-variable">doPost</span>(<span class="cm-variable">HttpServletRequest</span> <span class="cm-variable">request</span>, <span class="cm-variable">HttpServletResponse</span> <span class="cm-variable">response</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">throws</span> <span class="cm-variable">ServletException</span>, <span class="cm-variable">IOException</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-comment">//TODO Auto-generated method stub</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-variable">doGet</span>(<span class="cm-variable">request</span>, <span class="cm-variable">response</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1328px;"></div></div></div></pre><p>编写相应的 HTML 文件和设置对应的 <code>web.xml</code> 文件即可。</p><h2><a name='header-n200' class='md-header-anchor '></a>客户端 HTTP 请求</h2><p>浏览器在请求网页时，会向 Web 服务器发送特定信息，这些信息作为 HTTP 请求的头的一部分进行传输，不能被直接读取。</p><h3><a name='header-n203' class='md-header-anchor '></a>一些重要的头信息</h3><table><thead><tr><th style='text-align:left;' >头信息</th><th style='text-align:left;' >描述</th></tr></thead><tbody><tr><td style='text-align:left;' >Accept</td><td style='text-align:left;' >这个头信息指定浏览器或其他客户端可以处理的 MIME 类型。值 <strong>image/png</strong> 或 <strong>image/jpeg</strong> 是最常见的两种可能值。</td></tr><tr><td style='text-align:left;' >Accept-Charset</td><td style='text-align:left;' >这个头信息指定浏览器可以用来显示信息的字符集。例如 ISO-8859-1。</td></tr><tr><td style='text-align:left;' >Accept-Encoding</td><td style='text-align:left;' >这个头信息指定浏览器知道如何处理的编码类型。值 <strong>gzip</strong> 或 <strong>compress</strong> 是最常见的两种可能值。</td></tr><tr><td style='text-align:left;' >Accept-Language</td><td style='text-align:left;' >这个头信息指定客户端的首选语言，在这种情况下，Servlet 会产生多种语言的结果。例如，en、en-us、ru 等。</td></tr><tr><td style='text-align:left;' >Authorization</td><td style='text-align:left;' >这个头信息用于客户端在访问受密码保护的网页时识别自己的身份。</td></tr><tr><td style='text-align:left;' >Connection</td><td style='text-align:left;' >这个头信息指示客户端是否可以处理持久 HTTP 连接。持久连接允许客户端或其他浏览器通过单个请求来检索多个文件。值 <strong>Keep-Alive</strong> 意味着使用了持续连接。</td></tr><tr><td style='text-align:left;' >Content-Length</td><td style='text-align:left;' >这个头信息只适用于 POST 请求，并给出 POST 数据的大小（以字节为单位）。</td></tr><tr><td style='text-align:left;' >Cookie</td><td style='text-align:left;' >这个头信息把之前发送到浏览器的 cookies 返回到服务器。</td></tr><tr><td style='text-align:left;' >Host</td><td style='text-align:left;' >这个头信息指定原始的 URL 中的主机和端口。</td></tr><tr><td style='text-align:left;' >If-Modified-Since</td><td style='text-align:left;' >这个头信息表示只有当页面在指定的日期后已更改时，客户端想要的页面。如果没有新的结果可以使用，服务器会发送一个 304 代码，表示 <strong>Not Modified</strong> 头信息。</td></tr><tr><td style='text-align:left;' >If-Unmodified-Since</td><td style='text-align:left;' >这个头信息是 If-Modified-Since 的对立面，它指定只有当文档早于指定日期时，操作才会成功。</td></tr><tr><td style='text-align:left;' >Referer</td><td style='text-align:left;' >这个头信息指示所指向的 Web 页的 URL。例如，如果您在网页 1，点击一个链接到网页 2，当浏览器请求网页 2 时，网页 1 的 URL 就会包含在 Referer 头信息中。</td></tr><tr><td style='text-align:left;' >User-Agent</td><td style='text-align:left;' >这个头信息识别发出请求的浏览器或其他客户端，并可以向不同类型的浏览器返回不同的内容。</td></tr></tbody></table><h3><a name='header-n247' class='md-header-anchor '></a>读取 HTTP 头的方法</h3><p>下面的方法可用在 Servlet 程序中读取 HTTP 头，这些方法通过 HttpServletRequest 对象调用。</p><table><thead><tr><th>序号</th><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td><strong>Cookie[] getCookies()</strong></td><td>返回一个数组，包含客户端发送该请求的所有的 Cookie 对象。</td></tr><tr><td>2</td><td><strong>Enumeration getAttributeNames()</strong></td><td>返回一个枚举，包含提供给该请求可用的属性名称。</td></tr><tr><td>3</td><td><strong>Enumeration getHeaderNames()</strong></td><td>返回一个枚举，包含在该请求中包含的所有的头名。</td></tr><tr><td>4</td><td><strong>Enumeration getParameterNames()</strong></td><td>返回一个 String 对象的枚举，包含在该请求中包含的参数的名称。</td></tr><tr><td>5</td><td><strong>HttpSession getSession()</strong></td><td>返回与该请求关联的当前 session 会话，或者如果请求没有 session 会话，则创建一个。</td></tr><tr><td>6</td><td><strong>HttpSession getSession(boolean create)</strong></td><td>返回与该请求关联的当前 HttpSession，或者如果没有当前会话，且创建是真的，则返回一个新的 session 会话。</td></tr><tr><td>7</td><td><strong>Locale getLocale()</strong></td><td>基于 Accept-Language 头，返回客户端接受内容的首选的区域设置。</td></tr><tr><td>8</td><td><strong>Object getAttribute(String name)</strong></td><td>以对象形式返回已命名属性的值，如果没有给定名称的属性存在，则返回 null。</td></tr><tr><td>9</td><td><strong>ServletInputStream getInputStream()</strong></td><td>使用 ServletInputStream，以二进制数据形式检索请求的主体。</td></tr><tr><td>10</td><td><strong>String getAuthType()</strong></td><td>返回用于保护 Servlet 的身份验证方案的名称，例如，&quot;BASIC&quot; 或 &quot;SSL&quot;，如果JSP没有受到保护则返回 null。</td></tr><tr><td>11</td><td><strong>String getCharacterEncoding()</strong></td><td>返回请求主体中使用的字符编码的名称。</td></tr><tr><td>12</td><td><strong>String getContentType()</strong></td><td>返回请求主体的 MIME 类型，如果不知道类型则返回 null。</td></tr><tr><td>13</td><td><strong>String getContextPath()</strong></td><td>返回指示请求上下文的请求 URI 部分。</td></tr><tr><td>14</td><td><strong>String getHeader(String name)</strong></td><td>以字符串形式返回指定的请求头的值。</td></tr><tr><td>15</td><td><strong>String getMethod()</strong></td><td>返回请求的 HTTP 方法的名称，例如，GET、POST 或 PUT。</td></tr><tr><td>16</td><td><strong>String getParameter(String name)</strong></td><td>以字符串形式返回请求参数的值，或者如果参数不存在则返回 null。</td></tr><tr><td>17</td><td><strong>String getPathInfo()</strong></td><td>当请求发出时，返回与客户端发送的 URL 相关的任何额外的路径信息。</td></tr><tr><td>18</td><td><strong>String getProtocol()</strong></td><td>返回请求协议的名称和版本。</td></tr><tr><td>19</td><td><strong>String getQueryString()</strong></td><td>返回包含在路径后的请求 URL 中的查询字符串。</td></tr><tr><td>20</td><td><strong>String getRemoteAddr()</strong></td><td>返回发送请求的客户端的互联网协议（IP）地址。</td></tr><tr><td>21</td><td><strong>String getRemoteHost()</strong></td><td>返回发送请求的客户端的完全限定名称。</td></tr><tr><td>22</td><td><strong>String getRemoteUser()</strong></td><td>如果用户已通过身份验证，则返回发出请求的登录用户，或者如果用户未通过身份验证，则返回 null。</td></tr><tr><td>23</td><td><strong>String getRequestURI()</strong></td><td>从协议名称直到 HTTP 请求的第一行的查询字符串中，返回该请求的 URL 的一部分。</td></tr><tr><td>24</td><td><strong>String getRequestedSessionId()</strong></td><td>返回由客户端指定的 session 会话 ID。</td></tr><tr><td>25</td><td><strong>String getServletPath()</strong></td><td>返回调用 JSP 的请求的 URL 的一部分。</td></tr><tr><td>26</td><td><strong>String[] getParameterValues(String name)</strong></td><td>返回一个字符串对象的数组，包含所有给定的请求参数的值，如果参数不存在则返回 null。</td></tr><tr><td>27</td><td><strong>boolean isSecure()</strong></td><td>返回一个布尔值，指示请求是否使用安全通道，如 HTTPS。</td></tr><tr><td>28</td><td><strong>int getContentLength()</strong></td><td>以字节为单位返回请求主体的长度，并提供输入流，或者如果长度未知则返回 -1。</td></tr><tr><td>29</td><td><strong>int getIntHeader(String name)</strong></td><td>返回指定的请求头的值为一个 int 值。</td></tr><tr><td>30</td><td><strong>int getServerPort()</strong></td><td>返回接收到这个请求的端口号。</td></tr><tr><td>31</td><td><strong>int getParameterMap()</strong></td><td>将参数封装成 Map 类型。</td></tr></tbody></table><h3><a name='header-n379' class='md-header-anchor '></a>HTTP Header 请求实例</h3><p>下例使用 <code>HttpServletRequest</code> 的 <strong><code>getHeaderNames()</code></strong> 方法读取 HTTP 头信息。该方法返回一个包含与当前的 HTTP 请求相关的头信息的枚举。</p><p>一旦有枚举，即可使用标准方式循环。</p><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">java</span>.<span class="cm-variable">io</span>.<span class="cm-variable">IOException</span>;</span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">java</span>.<span class="cm-variable">io</span>.<span class="cm-variable">PrintWriter</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">java</span>.<span class="cm-variable">util</span>.<span class="cm-variable">Enumeration</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">ServletException</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">annotation</span>.<span class="cm-variable">WebServlet</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">http</span>.<span class="cm-variable">HttpServlet</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">http</span>.<span class="cm-variable">HttpServletRequest</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">http</span>.<span class="cm-variable">HttpServletResponse</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">@WebServlet</span>(<span class="cm-string">"/DisplayHeader"</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">DisplayHeader</span> <span class="cm-keyword">extends</span> <span class="cm-variable">HttpServlet</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;">  ...</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">// 处理 GET 方法请求的方法</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">doGet</span>(<span class="cm-variable">HttpServletRequest</span> <span class="cm-variable">request</span>, <span class="cm-variable">HttpServletResponse</span> <span class="cm-variable">response</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">throws</span> <span class="cm-variable">ServletException</span>, <span class="cm-variable">IOException</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  ...</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-variable">Enumeration</span> <span class="cm-variable">headerNames</span> <span class="cm-operator">=</span> <span class="cm-variable">request</span>.<span class="cm-variable">getHeaderNames</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; </span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-keyword">while</span>(<span class="cm-variable">headerNames</span>.<span class="cm-variable">hasMoreElements</span>()) {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  <span class="cm-variable-3">String</span> <span class="cm-variable">paramName</span> <span class="cm-operator">=</span> (<span class="cm-variable-3">String</span>)<span class="cm-variable">headerNames</span>.<span class="cm-variable">nextElement</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  ...</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  ...</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;">  ...</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 702px;"></div></div></div></pre><p>配置对应的 <code>web.xml</code> 文件：</p><pre class="md-fences md-end-block" lang="xml"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">&lt;?xml</span> <span class="cm-meta">version="1.0" encoidng="UTF-8"?&gt;</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">web-app</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">&lt;!-- 类名 --&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span>DisplayHeader<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-class</span><span class="cm-tag cm-bracket">&gt;</span>Servlet.DisplayHeader<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-class</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-mapping</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span>DisplayHearder<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">&lt;!-- 访问的网址，匹配模式 --&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">url-pattern</span><span class="cm-tag cm-bracket">&gt;</span>/TomcatTest/DisplayHeader<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">url-pattern</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-mapping</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">web-app</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 338px;"></div></div></div></pre><h2><a name='header-n388' class='md-header-anchor '></a>服务器 HTTP 响应</h2><h3><a name='header-n389' class='md-header-anchor '></a>HTTP 响应消息格式</h3><p>当 Web 服务器响应一个 HTTP 请求时，通常包括一个状态行、一些响应包头、一个空行和文档，如下</p><pre class="md-fences md-end-block" lang="html"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;">HTTP/1.1 200 OK</span></pre></div><pre class=""><span style="padding-right: 0.1px;">Content-Type: text/html</span></pre><pre class=""><span style="padding-right: 0.1px;">Header2:...</span></pre><pre class=""><span style="padding-right: 0.1px;">...</span></pre><pre class=""><span style="padding-right: 0.1px;">HeaderN:...</span></pre><pre class=""><span style="padding-right: 0.1px;">  (Blank Line)</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">&lt;!doctype ...&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">html</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">head</span><span class="cm-tag cm-bracket">&gt;</span>...<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">head</span><span class="cm-tag cm-bracket">&gt;</span>`</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">body</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">...</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">body</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">html</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 338px;"></div></div></div></pre><p>其中状态行包括 HTTP 版本、状态码和对应于状态码的短信息。</p><h3><a name='header-n395' class='md-header-anchor '></a>一些从 Web 服务端返回的有用的 HTTP 1.1 响应报头：</h3><table><thead><tr><th>头信息</th><th>描述</th></tr></thead><tbody><tr><td>Allow</td><td>这个头信息指定服务器支持的请求方法（GET、POST 等）。</td></tr><tr><td>Cache-Control</td><td>这个头信息指定响应文档在何种情况下可以安全地缓存。可能的值有：<strong>public、private</strong> 或 <strong>no-cache</strong> 等。Public 意味着文档是可缓存，Private 意味着文档是单个用户私用文档，且只能存储在私有（非共享）缓存中，no-cache 意味着文档不应被缓存。</td></tr><tr><td>Connection</td><td>这个头信息指示浏览器是否使用持久 HTTP 连接。值 <strong>close</strong> 指示浏览器不使用持久 HTTP 连接，值 <strong>keep-alive</strong> 意味着使用持久连接。</td></tr><tr><td>Content-Disposition</td><td>这个头信息可以让您请求浏览器要求用户以给定名称的文件把响应保存到磁盘。</td></tr><tr><td>Content-Encoding</td><td>在传输过程中，这个头信息指定页面的编码方式。</td></tr><tr><td>Content-Language</td><td>这个头信息表示文档编写所使用的语言。例如，en、en-us、ru 等。</td></tr><tr><td>Content-Length</td><td>这个头信息指示响应中的字节数。只有当浏览器使用持久（keep-alive）HTTP 连接时才需要这些信息。</td></tr><tr><td>Content-Type</td><td>这个头信息提供了响应文档的 MIME（Multipurpose Internet Mail Extension）类型。</td></tr><tr><td>Expires</td><td>这个头信息指定内容过期的时间，在这之后内容不再被缓存。</td></tr><tr><td>Last-Modified</td><td>这个头信息指示文档的最后修改时间。然后，客户端可以缓存文件，并在以后的请求中通过 <strong>If-Modified-Since</strong> 请求头信息提供一个日期。</td></tr><tr><td>Location</td><td>这个头信息应被包含在所有的带有状态码的响应中。在 300s 内，这会通知浏览器文档的地址。浏览器会自动重新连接到这个位置，并获取新的文档。</td></tr><tr><td>Refresh</td><td>这个头信息指定浏览器应该如何尽快请求更新的页面。您可以指定页面刷新的秒数。</td></tr><tr><td>Retry-After</td><td>这个头信息可以与 503（Service Unavailable 服务不可用）响应配合使用，这会告诉客户端多久就可以重复它的请求。</td></tr><tr><td>Set-Cookie</td><td>这个头信息指定一个与页面关联的 cookie。</td></tr></tbody></table><h3><a name='header-n442' class='md-header-anchor '></a>设置 HTTP 响应报头的方法</h3><table><thead><tr><th>序号</th><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td><strong>String encodeRedirectURL(String url)</strong></td><td>为 sendRedirect 方法中使用的指定的 URL 进行编码，或者如果编码不是必需的，则返回 URL 未改变。</td></tr><tr><td>2</td><td><strong>String encodeURL(String url)</strong></td><td>对包含 session 会话 ID 的指定 URL 进行编码，或者如果编码不是必需的，则返回 URL 未改变。</td></tr><tr><td>3</td><td><strong>boolean containsHeader(String name)</strong></td><td>返回一个布尔值，指示是否已经设置已命名的响应报头。</td></tr><tr><td>4</td><td><strong>boolean isCommitted()</strong></td><td>返回一个布尔值，指示响应是否已经提交。</td></tr><tr><td>5</td><td><strong>void addCookie(Cookie cookie)</strong></td><td>把指定的 cookie 添加到响应。</td></tr><tr><td>6</td><td><strong>void addDateHeader(String name, long date)</strong></td><td>添加一个带有给定的名称和日期值的响应报头。</td></tr><tr><td>7</td><td><strong>void addHeader(String name, String value)</strong></td><td>添加一个带有给定的名称和值的响应报头。</td></tr><tr><td>8</td><td><strong>void addIntHeader(String name, int value)</strong></td><td>添加一个带有给定的名称和整数值的响应报头。</td></tr><tr><td>9</td><td><strong>void flushBuffer()</strong></td><td>强制任何在缓冲区中的内容被写入到客户端。</td></tr><tr><td>10</td><td><strong>void reset()</strong></td><td>清除缓冲区中存在的任何数据，包括状态码和头。</td></tr><tr><td>11</td><td><strong>void resetBuffer()</strong></td><td>清除响应中基础缓冲区的内容，不清除状态码和头。</td></tr><tr><td>12</td><td><strong>void sendError(int sc)</strong></td><td>使用指定的状态码发送错误响应到客户端，并清除缓冲区。</td></tr><tr><td>13</td><td><strong>void sendError(int sc, String msg)</strong></td><td>使用指定的状态发送错误响应到客户端。</td></tr><tr><td>14</td><td><strong>void sendRedirect(String location)</strong></td><td>使用指定的重定向位置 URL 发送临时重定向响应到客户端。</td></tr><tr><td>15</td><td><strong>void setBufferSize(int size)</strong></td><td>为响应主体设置首选的缓冲区大小。</td></tr><tr><td>16</td><td><strong>void setCharacterEncoding(String charset)</strong></td><td>设置被发送到客户端的响应的字符编码（MIME 字符集）例如，UTF-8。</td></tr><tr><td>17</td><td><strong>void setContentLength(int len)</strong></td><td>设置在 HTTP Servlet 响应中的内容主体的长度，该方法设置 HTTP Content-Length 头。</td></tr><tr><td>18</td><td><strong>void setContentType(String type)</strong></td><td>如果响应还未被提交，设置被发送到客户端的响应的内容类型。</td></tr><tr><td>19</td><td><strong>void setDateHeader(String name, long date)</strong></td><td>设置一个带有给定的名称和日期值的响应报头。</td></tr><tr><td>20</td><td><strong>void setHeader(String name, String value)</strong></td><td>设置一个带有给定的名称和值的响应报头。</td></tr><tr><td>21</td><td><strong>void setIntHeader(String name, int value)</strong></td><td>设置一个带有给定的名称和整数值的响应报头。</td></tr><tr><td>22</td><td><strong>void setLocale(Locale loc)</strong></td><td>如果响应还未被提交，设置响应的区域。</td></tr><tr><td>23</td><td><strong>void setStatus(int sc)</strong></td><td>为该响应设置状态码。</td></tr></tbody></table><h3><a name='header-n540' class='md-header-anchor '></a>HTTP Header 响应实例</h3><p>下例使用 <strong><code>setIntHeader()</code></strong> 方法来设置 <strong><code>Refresh</code></strong> 头。</p><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">import</span> <span class="cm-variable">java</span>.<span class="cm-variable">io</span>.<span class="cm-variable">IOException</span>;</span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">java</span>.<span class="cm-variable">io</span>.<span class="cm-variable">PrintWriter</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">java</span>.<span class="cm-variable">text</span>.<span class="cm-variable">SimpleDateFormat</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">java</span>.<span class="cm-variable">util</span>.<span class="cm-variable">Calendar</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">java</span>.<span class="cm-variable">util</span>.<span class="cm-variable">Date</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">ServletException</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">annotation</span>.<span class="cm-variable">WebServlet</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">http</span>.<span class="cm-variable">HttpServlet</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">http</span>.<span class="cm-variable">HttpServletRequest</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">http</span>.<span class="cm-variable">HttpServletResponse</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">@WebServlet</span>(<span class="cm-string">"/Refresh"</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Refresh</span> <span class="cm-keyword">extends</span> <span class="cm-variable">HttpServlet</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;">  ...</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">doGet</span>(<span class="cm-variable">HttpServletRequest</span> <span class="cm-variable">request</span>, <span class="cm-variable">HttpServletResponse</span> <span class="cm-variable">response</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">throws</span> <span class="cm-variable">ServletException</span>, <span class="cm-variable">IOException</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-comment">//设置刷新自动加载时间为 5 秒</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-variable">response</span>.<span class="cm-variable">setIntHeader</span>(<span class="cm-string">"Refresh"</span>, <span class="cm-number">5</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-comment">// 设置响应内容类型</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-variable">response</span>.<span class="cm-variable">setContentType</span>(<span class="cm-string">"text/html;charset="</span><span class="cm-variable">UTF</span><span class="cm-operator">-</span><span class="cm-number">8</span><span class="cm-string">");</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-comment">// 使用默认时区和语言环境获得一个日历</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-variable">Calendar</span> <span class="cm-variable">cale</span> <span class="cm-operator">=</span> <span class="cm-variable">Calendar</span>.<span class="cm-variable">getInstance</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>  <span class="cm-comment">// 将 Calendar 类型转换为 Date 类型</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>  <span class="cm-variable">Date</span> <span class="cm-variable">tasktime</span> <span class="cm-operator">=</span> <span class="cm-variable">cale</span>.<span class="cm-variable">getTime</span>();</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>  <span class="cm-comment">// 设置日期输出的格式</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>  <span class="cm-variable">SimpleDateFormat</span> <span class="cm-variable">df</span><span class="cm-operator">=</span><span class="cm-keyword">new</span> <span class="cm-variable">SimpleDateFormat</span>(<span class="cm-string">"yyyy-MM-dd HH:mm:ss"</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>  <span class="cm-comment">//格式化输出</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>  <span class="cm-variable-3">String</span> <span class="cm-variable">nowTime</span> <span class="cm-operator">=</span> <span class="cm-variable">df</span>.<span class="cm-variable">format</span>(<span class="cm-variable">tasktime</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>  ...</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">doPost</span>(<span class="cm-variable">HttpServletRequest</span> <span class="cm-variable">request</span>, <span class="cm-variable">HtpServletResponse</span> <span class="cm-variable">response</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">throws</span> <span class="cm-variable">ServletException</span>, <span class="cm-variable">IOException</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-variable">doGet</span>(<span class="cm-variable">requset</span>, <span class="cm-variable">response</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>}</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 980px;"></div></div></div></pre><p>同样的，需要配置对应的 <code>web.xml</code> 上面的 Servlet 使页面 每隔 5 秒便刷新一次。</p><h2><a name='header-n546' class='md-header-anchor '></a>HTTP 状态码</h2><p>在上节中，我们讨论了服务器的 HTTP 响应消息格式，其中状态行包括 HTTP 版本、一个状态码及对应于状态码的短消息。</p><h3><a name='header-n549' class='md-header-anchor '></a>一些 HTTP 状态码及相关消息列表</h3><table><thead><tr><th>代码</th><th>消息</th><th>描述</th></tr></thead><tbody><tr><td>100</td><td>Continue</td><td>只有请求的一部分已经被服务器接收，但只要它没有被拒绝，客户端应继续该请求。</td></tr><tr><td>101</td><td>Switching Protocols</td><td>服务器切换协议。</td></tr><tr><td>200</td><td>OK</td><td>请求成功。</td></tr><tr><td>201</td><td>Created</td><td>该请求是完整的，并创建一个新的资源。</td></tr><tr><td>202</td><td>Accepted</td><td>该请求被接受处理，但是该处理是不完整的。</td></tr><tr><td>203</td><td>Non-authoritative Information</td><td></td></tr><tr><td>204</td><td>No Content</td><td></td></tr><tr><td>205</td><td>Reset Content</td><td></td></tr><tr><td>206</td><td>Partial Content</td><td></td></tr><tr><td>300</td><td>Multiple Choices</td><td>链接列表。用户可以选择一个链接，进入到该位置。最多五个地址。</td></tr><tr><td>301</td><td>Moved Permanently</td><td>所请求的页面已经转移到一个新的 URL。</td></tr><tr><td>302</td><td>Found</td><td>所请求的页面已经临时转移到一个新的 URL。</td></tr><tr><td>303</td><td>See Other</td><td>所请求的页面可以在另一个不同的 URL 下被找到。</td></tr><tr><td>304</td><td>Not Modified</td><td></td></tr><tr><td>305</td><td>Use Proxy</td><td></td></tr><tr><td>306</td><td><em>Unused</em></td><td>在以前的版本中使用该代码。现在已不再使用它，但代码仍被保留。</td></tr><tr><td>307</td><td>Temporary Redirect</td><td>所请求的页面已经临时转移到一个新的 URL。</td></tr><tr><td>400</td><td>Bad Request</td><td>服务器不理解请求。</td></tr><tr><td>401</td><td>Unauthorized</td><td>所请求的页面需要用户名和密码。</td></tr><tr><td>402</td><td>Payment Required</td><td><em>您还不能使用该代码。</em></td></tr><tr><td>403</td><td>Forbidden</td><td>禁止访问所请求的页面。</td></tr><tr><td>404</td><td>Not Found</td><td>服务器无法找到所请求的页面。.</td></tr><tr><td>405</td><td>Method Not Allowed</td><td>在请求中指定的方法是不允许的。</td></tr><tr><td>406</td><td>Not Acceptable</td><td>服务器只生成一个不被客户端接受的响应。</td></tr><tr><td>407</td><td>Proxy Authentication Required</td><td>在请求送达之前，您必须使用代理服务器的验证。</td></tr><tr><td>408</td><td>Request Timeout</td><td>请求需要的时间比服务器能够等待的时间长，超时。</td></tr><tr><td>409</td><td>Conflict</td><td>请求因为冲突无法完成。</td></tr><tr><td>410</td><td>Gone</td><td>所请求的页面不再可用。</td></tr><tr><td>411</td><td>Length Required</td><td>&quot;Content-Length&quot; 未定义。服务器无法处理客户端发送的不带 Content-Length 的请求信息。</td></tr><tr><td>412</td><td>Precondition Failed</td><td>请求中给出的先决条件被服务器评估为 false。</td></tr><tr><td>413</td><td>Request Entity Too Large</td><td>服务器不接受该请求，因为请求实体过大。</td></tr><tr><td>414</td><td>Request-url Too Long</td><td>服务器不接受该请求，因为 URL 太长。当您转换一个 &quot;post&quot; 请求为一个带有长的查询信息的 &quot;get&quot; 请求时发生。</td></tr><tr><td>415</td><td>Unsupported Media Type</td><td>服务器不接受该请求，因为媒体类型不被支持。</td></tr><tr><td>417</td><td>Expectation Failed</td><td></td></tr><tr><td>500</td><td>Internal Server Error</td><td>未完成的请求。服务器遇到了一个意外的情况。</td></tr><tr><td>501</td><td>Not Implemented</td><td>未完成的请求。服务器不支持所需的功能。</td></tr><tr><td>502</td><td>Bad Gateway</td><td>未完成的请求。服务器从上游服务器收到无效响应。</td></tr><tr><td>503</td><td>Service Unavailable</td><td>未完成的请求。服务器暂时超载或死机。</td></tr><tr><td>504</td><td>Gateway Timeout</td><td>网关超时。</td></tr><tr><td>505</td><td>HTTP Version Not Supported</td><td>服务器不支持&quot;HTTP协议&quot;版本。</td></tr></tbody></table><p>即</p><table><thead><tr><th>代码</th><th>描述</th></tr></thead><tbody><tr><td>1xx</td><td>临时响应，需要继续处理</td></tr><tr><td>2xx</td><td>接受</td></tr><tr><td>3xx</td><td>重定向</td></tr><tr><td>4xx</td><td>请求错误</td></tr><tr><td>5xx</td><td>服务器错误</td></tr></tbody></table><h3><a name='header-n736' class='md-header-anchor '></a>设置 HTTP 状态码的方法</h3><p>下列方法通过 <code>HttpServletResponse</code> 对象可用：</p><table><thead><tr><th>序号</th><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td><strong>public void setStatus ( int statusCode )</strong></td><td>该方法设置一个任意的状态码。setStatus 方法接受一个 int（状态码）作为参数。如果您的反应包含了一个特殊的状态码和文档，请确保在使用 <em>PrintWriter</em> 实际返回任何内容之前调用 setStatus。</td></tr><tr><td>2</td><td><strong>public void sendRedirect(String url)</strong></td><td>该方法生成一个 302 响应，连同一个带有新文档 URL 的 <em>Location</em> 头。</td></tr><tr><td>3</td><td><strong>public void sendError(int code, String message)</strong></td><td>该方法发送一个状态码（通常为 404），连同一个在 HTML 文档内部自动格式化并发送到客户端的短消息。</td></tr></tbody></table><h3><a name='header-n756' class='md-header-anchor '></a>HTTP 状态码实例</h3><p>下例将 <code>407</code> 错误代码发送到客户端浏览器，且显示 &quot;Need authentication&quot; 消息。</p><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">java</span>.<span class="cm-variable">io</span>.<span class="cm-operator">*</span>;</span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">java</span>.<span class="cm-variable">sevlet</span>.<span class="cm-operator">*</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">java</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">http</span>.<span class="cm-operator">*</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">java</span>.<span class="cm-variable">util</span>.<span class="cm-operator">*</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">@WebServlet</span>(<span class="cm-string">"/showError"</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">showError</span> <span class="cm-keyword">extends</span> <span class="cm-variable">HttpServlet</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">doGet</span>(<span class="cm-variable">HttpServletRequest</span> <span class="cm-variable">request</span>, <span class="cm-variable">HttpServletResponse</span> <span class="cm-variable">response</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">throws</span> <span class="cm-variable">ServletException</span>, <span class="cm-variable">IOException</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-variable">response</span>.<span class="cm-variable">sendError</span>(<span class="cm-number">407</span>, <span class="cm-string">"Need authentication"</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">doPost</span>(<span class="cm-variable">HttpServletRequest</span> <span class="cm-variable">request</span>, <span class="cm-variable">HttpServletResponse</span> <span class="cm-variable">response</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">throws</span> <span class="cm-variable">ServletException</span>,<span class="cm-variable">IOException</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-variable">doGet</span>(<span class="cm-variable">request</span>, <span class="cm-variable">response</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 416px;"></div></div></div></pre><h2><a name='header-n760' class='md-header-anchor '></a>编写 Filter</h2><p>Filter 可以动态地拦截请求和响应，以变换或使用包含在请求中的响应信息。</p><p>可以将一个或多个 Servlet Filter 附加到一个 Servlet 或一组 Servlet. Servlet Filter 也可以附加到 JSP 文件和 HTML 页面。调用 Servlet 前调用所有附加的 Servlet Filter.</p><p>Servlet Filter 是可以用于 Servlet 编程的 Java 类，可以实现一下目的：</p><ul><li>在客户端的请求访问后端资源之前，拦截这些请求；</li><li>在服务器的响应发送回客户端之前，处理这些响应.</li></ul><p>依据规范建议的各种类型的 Filter：</p><ul><li>身份验证过滤器（Authentication Filters）</li><li>Data compression Filters</li><li>Encryption Filters</li><li>触发资源访问事件过滤器</li><li>Image Conversion Filters</li><li>Logging and Auditing Filters</li><li>MIME-TYPE Chain Filters</li><li>Tokenizing Filters</li><li>XSL/T Filters</li></ul><p>Filter 通过 Web 部署描述符（web.xml ）中的 XML 标签来声明，然后映射到应用程序部署描述符中的 Servlet 名称或 URL 模式。</p><p>当 Web 容器启动 Web 应用程序时，它会为在部署描述符中每一个声明的 Filter 创建实例。Filter 的执行顺序与在 web.xml 配置文件中的配置顺序一致，一般吧 Filter 配置在所有的 Servlet 之前。</p><h3><a name='header-n808' class='md-header-anchor '></a>Servlet 过滤器方法</h3><p>Filter 是一个<strong>实现了 <code>javax.servlet.Filter</code> 接口</strong>的 Java <strong>类</strong>。<code>javax.servlet.Filter</code> 定义了三个方法：</p><table><thead><tr><th>序号</th><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td><strong>public void doFilter (ServletRequest, ServletResponse, FilterChain)</strong></td><td>该方法完成实际的过滤操作，当客户端请求方法与过滤器设置匹配的URL时，Servlet容器将先调用过滤器的doFilter方法。FilterChain用户访问后续过滤器。</td></tr><tr><td>2</td><td><strong>public void init(FilterConfig filterConfig)</strong></td><td>web 应用程序启动时，web 服务器将创建Filter 的实例对象，并调用其init方法，读取web.xml配置，完成对象的初始化功能，从而为后续的用户请求作好拦截的准备工作（filter对象只会创建一次，init方法也只会执行一次）。开发人员通过init方法的参数，可获得代表当前filter配置信息的FilterConfig对象。</td></tr><tr><td>3</td><td><strong>public void destroy()</strong></td><td>Servlet容器在销毁过滤器实例前调用该方法，在该方法中释放Servlet过滤器占用的资源。</td></tr></tbody></table><h3><a name='header-n828' class='md-header-anchor '></a>FilterConfig 使用</h3><p>Filter 的 <code>init()</code> 方法提供了一个 <code>FilterConfig</code> 对象。如 <code>web.xml</code> 文件配置如下：</p><pre class="md-fences md-end-block" lang="xml"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">filter</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">filter-name</span><span class="cm-tag cm-bracket">&gt;</span>LoginFilter<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">filter-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">filter-class</span><span class="cm-tag cm-bracket">&gt;</span>Filter.LogFilter<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">filter-class</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">init-param</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">param-name</span><span class="cm-tag cm-bracket">&gt;</span>Site<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">param-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">param-value</span><span class="cm-tag cm-bracket">&gt;</span>参数值<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">param-value</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">init-param</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">filter</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre><p>在 <code>init()</code> 方法使用 <code>FilterConfig</code> 对象获取参数：</p><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-def">init</span>(<span class="cm-variable">FilterConfig</span> <span class="cm-variable">config</span>) <span class="cm-keyword">throws</span> <span class="cm-variable">ServletException</span> {</span></pre></div><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">// 获取初始化参数</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-variable-3">String</span> <span class="cm-variable">site</span> <span class="cm-operator">=</span> <span class="cm-variable">config</span>.<span class="cm-variable">getInitParameter</span>(<span class="cm-string">"Site"</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">//输出初始化参数</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"这里的输出是参数值"</span> <span class="cm-operator">+</span> <span class="cm-variable">site</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 156px;"></div></div></div></pre><h3><a name='header-n835' class='md-header-anchor '></a>Servlet 过滤器实例</h3><pre class="md-fences md-end-block" lang="java"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">package</span> <span class="cm-def">Filter</span>;</span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-operator">*</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">java</span>.<span class="cm-variable">util</span>.<span class="cm-operator">*</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">LogFilter</span> <span class="cm-keyword">implements</span> <span class="cm-variable">Filter</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">init</span>(<span class="cm-variable">FilterConfig</span> <span class="cm-variable">config</span>) <span class="cm-keyword">throws</span> <span class="cm-variable">ServletException</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//获取初始化参数</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable-3">String</span> <span class="cm-variable">site</span> <span class="cm-operator">=</span> <span class="cm-variable">config</span>.<span class="cm-variable">getInitParameter</span>(<span class="cm-string">"Site"</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//输出初始化参数</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"这里的输出是参数值"</span> <span class="cm-operator">+</span> <span class="cm-variable">site</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;">  }</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">doFilter</span>(<span class="cm-variable">ServletRequest</span> <span class="cm-variable">request</span>, <span class="cm-variable">ServletResponse</span> <span class="cm-variable">response</span>, <span class="cm-variable">FilterChain</span> <span class="cm-variable">chain</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-keyword">throws</span> <span class="cm-variable">java</span>.<span class="cm-variable">io</span>.<span class="cm-variable">IOException</span>, <span class="cm-variable">ServletException</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">// 输出一些东西</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"这是一个 doFilter 的演示。"</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">//把请求传回 FilterChain</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-variable">chain</span>.<span class="cm-variable">doFilter</span>(<span class="cm-variable">request</span>, <span class="cm-variable">response</span>);</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">destroy</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">/* 在 Filter 实例被 Web 容器从服务移除之前调用 */</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  }</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 598px;"></div></div></div></pre><h3><a name='header-n837' class='md-header-anchor '></a><code>Web.xml</code> 的 Servlet 过滤器映射 （Servlet Filter Mapping）</h3><p>以前面的 <code>DisplayHeader</code> 类为实例，利用我们定义的 Filter，映射到一个 URL 或 Servlet。这与定义 Servlet 然后映射至 URL 模式大致相同。</p><pre class="md-fences md-end-block" lang="xml"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-meta">&lt;?xml</span> <span class="cm-meta">version="1.0" encoding="UTF-8"?&gt;</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">web-app</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">filter</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">filter-name</span><span class="cm-tag cm-bracket">&gt;</span>LogFilter<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">filter-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">filter-class</span><span class="cm-tag cm-bracket">&gt;</span>Filter.LogFilter<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">filter-class</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">init-param</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">param-name</span><span class="cm-tag cm-bracket">&gt;</span>Site<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">param-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">param-value</span><span class="cm-tag cm-bracket">&gt;</span>参数值<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">param-value</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">init-param</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">filter</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">filter-mapping</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">filter-name</span><span class="cm-tag cm-bracket">&gt;</span>LogFilter<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">filter-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">url-pattern</span><span class="cm-tag cm-bracket">&gt;</span>/*<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">url-pattern</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">filter-mapping</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  </span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">&lt;!-- 类名 --&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span>DisplayHeader<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">&lt;!-- 所在的包 --&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-class</span><span class="cm-tag cm-bracket">&gt;</span>Servlet.DisplayHeader<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-class</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-mapping</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span>DisplayHeader<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">&lt;!-- 访问的网址 --&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">url-pattern</span><span class="cm-tag cm-bracket">&gt;</span>/TomcatTest/DisplayHeader<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">url-pattern</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-mapping</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">web-app</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 702px;"></div></div></div></pre><p>上面的 Filter 对所有的 Servlet 都会适用，因为在配置中的 <code>&lt;url-pattern&gt;</code> 中指定模式为 <code>/*</code> 。如果只需要在特定的 Servlet 上应用，则可以指定该 Servlet 路径。</p><h3><a name='header-n843' class='md-header-anchor '></a>使用多个过滤器</h3><p>Web 应用程序可以根据特定的目的定义若干不同过滤器。假设定义了两个 Filter：<em>AuthenFilter</em> 和 <em>LogFilter</em> ，则需要创建如下的映射，</p><pre class="md-fences md-end-block" lang="xml"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler"></div><div class="CodeMirror-gutter-filler"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">filter</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">filter-name</span><span class="cm-tag cm-bracket">&gt;</span>LogFilter<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">filter-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">filter-class</span><span class="cm-tag cm-bracket">&gt;</span>Filter.LogFilter<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">filter-class</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">init-param</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">param-name</span><span class="cm-tag cm-bracket">&gt;</span>test-param<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">param-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">param-value</span><span class="cm-tag cm-bracket">&gt;</span>Initialization Paramter<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">param-value</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">init-param</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">filter</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">filter</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">filter-name</span><span class="cm-tag cm-bracket">&gt;</span>AuthenFilter<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">filter-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">filter-class</span><span class="cm-tag cm-bracket">&gt;</span>Filter.AuthenFilter<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">filter-class</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">init-param</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">param-name</span><span class="cm-tag cm-bracket">&gt;</span>test-param<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">param-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">param-value</span><span class="cm-tag cm-bracket">&gt;</span>Initialization Paramter<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">param-value</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">init-param</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">filter</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">filter-mapping</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">filter-name</span><span class="cm-tag cm-bracket">&gt;</span>LogFilter<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">filter-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">url-pattern</span><span class="cm-tag cm-bracket">&gt;</span>/*<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">url-pattern</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">filter-mapping</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">filter-mapping</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">filter-name</span><span class="cm-tag cm-bracket">&gt;</span>AuthenFilter<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">filter-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">url-pattern</span><span class="cm-tag cm-bracket">&gt;</span>/*<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">url-pattern</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">filter-mapping</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">filter-mapping</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">filter-name</span><span class="cm-tag cm-bracket">&gt;</span>AuthenFilter<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">filter-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">url-pattern</span><span class="cm-tag cm-bracket">&gt;</span>/*<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">url-pattern</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">filter-mapping</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; top: 0px;"></div><div class="CodeMirror-gutters" style="display: none; height: 832px;"></div></div></div></pre><h4><a name='header-n847' class='md-header-anchor '></a>过滤器的应用顺序</h4><p><code>web.xml</code> 中的 <code>filter-mapping</code> 元素的顺序决定了 Web 容器应用过滤器到 Servlet 的顺序，若要反转过滤器的顺序，只需要在 <code>web.xml</code> 文件中反转 <code>filter-mapping</code> 元素即可。</p><h4><a name='header-n850' class='md-header-anchor '></a><code>web.xml</code> 配置各节点说明</h4><ul><li><p><code>&lt;filter&gt;</code> 指定一个 Filter</p><ul><li><p><code>&lt;filter-name&gt;</code> 用于为 Filter 指定一个名字，该元素内容不能为空</p></li><li><p><code>&lt;filter-class&gt;</code> 元素用于指定过滤器的完整的限定类名</p></li><li><p><code>&lt;init-param&gt;</code> 元素用于为过滤器指定初始化参数，子元素</p><ul><li><code>&lt;param-name&gt;</code> 指定参数名字，</li><li><code>&lt;param-value&gt;</code> 指定参数值</li></ul></li><li><p>Filter 中使用 FilterConfig 接口来访问初始化参数</p></li></ul></li><li><p><code>&lt;filter-mapping&gt;</code> 元素用于设置一个 Filter 所负责拦截的资源。一个 Filter 拦截的资源可通过两种方式来指定：Servlet 名称和资源访问的请求路径</p><ul><li><code>&lt;filter-name&gt;</code> 子元素用于设置 Filter 的注册名称，该值必须是在 <code>&lt;filter&gt;</code> 元素中声明过的 Filter 名字。</li><li><code>&lt;url-pattern&gt;</code> 设置 Filter 所拦截的请求路径（Filter 关联的 URL 样式）</li></ul></li><li><p><code>&lt;servlet-name&gt;</code> 指定 Filter 所拦截的 Servlet 名称</p></li><li><p><code>&lt;dispatcher&gt;</code> 指定 Filter 所拦截的资源被 Servlet 容器调用的方式，可以是 <em>REQUEST, INCLUDE, FORWARD</em> 和 <em>ERROR</em> 之一，默认为 <em>REQUEST</em>。用户可以设置多个 <code>&lt;dispacher&gt;</code> 子元素来指定 Filter 对资源的多种调用方式进行拦截</p></li><li><p><code>&lt;dispatcher&gt;</code> 子元素可以设置的值及其意义</p><ul><li><code>REQUEST</code>：当用户直接访问页面时，Web 将会调用过滤器，如果目标资源通过 <code>RequestDispatcher</code> 的 <code>include()</code> 或 <code>forward()</code> 方法进行访问，则不会调用 Filter.</li><li><code>INCLUDE</code>：如果目标资源是通过 <code>RequestDispatcher</code> 的 <code>include()</code> 方法访问时，那么 Filter 将被调用，除此之外，不被调用。</li><li><code>FORWARD</code>：如果目标资源是通过 <code>RequestDispathcer</code> 的 <code>forward()</code> 方法访问时，那么 Filter 将被调用，除此之外，不被调用。</li><li><code>EROOR</code>：如果目标资源是通过声明式异常处理机制调用时，那么该 Filter 将被调用，除此之外，过滤器不会被调用。</li></ul></li></ul><h2><a name='header-n907' class='md-header-anchor '></a>异常处理</h2><p></p></div>
</body>
</html>